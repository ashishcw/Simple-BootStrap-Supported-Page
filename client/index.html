<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Title</title>
    <link rel="stylesheet" href="./css/project.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/bootstrap-table.min.css">

    <script src="./js/PapaParse/papaparse.min.js"></script>

    <script src="./js/JScriptManualExtender/DataDumper.js" type="text/javascript"></script>
    <script src="./js/jquery/jquery.min.js" type="text/javascript"></script>

</head>

<body>
    <!-- navbar definition goes here -->
    <nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <div class="container-fluid-nav">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#index">
                                <h3>
                                    Table
                                </h3>
                            </a>
                        </li>
                        <li>
                            <a href="#Charts">
                                <h3>
                                    Charts
                                </h3>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!--nabar head ends here -->
        </div>
        <!--container ends here -->
    </nav>


    <div class="container-table">

        <div class="row">

            <div class="col-lg-12">
                <h1 class="page-header">
                    This is a Table Page
                </h1>
            </div>

        </div>


        <div class="table-body">

            <div class="tabele-responsive-lg">
                <table class="table table-bordered" id="dataTable">
                </table>
            </div>

        </div>

        <div id="main_table">

        </div>

    </div>

</body>


<script>

    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "js\\JScriptManualExtender\\data.csv",
            dataType: "text",
            success: function (data) {
                processData(data);
                $('#dataTable').append(arrayToTable(Papa.parse(data).data));
            }
        });
    });

    function processData(allText) {
        var allTextLines = allText.split(/\r\n|\n/);
        var headers = allTextLines[0].split(',');
        var lines = [];

        for (var i = 1; i < allTextLines.length; i++) {
            var data = allTextLines[i].split(',');
            if (data.length == headers.length) {
                var tarr = [];
                for (var j = 0; j < headers.length; j++) {
                    tarr.push(headers[j] + ":" + data[j]);
                }
                lines.push(tarr);
            }
        }
        // alert(lines);
    }

    function arrayToTable(tableData) {
        var table = $('<table table-dark>');
        var thead = $('<thead></thead>')
        $(tableData).each(function (i, rowData) {
            var row = $('<tr></tr>');
            $(rowData).each(function (j, cellData) {
                row.append($('<td style-"width: 10%">' + cellData + '</td>'));
            });
            table.append(thead.append(row));
        });
        return table;
    }

</script>


<script>
    $(document).ready(function(){
        $.ajax({
            url: "js\\JScriptManualExtender\\data.csv",
            dataType: "text",
            success:function(data){
                var csv_data = data.split(/\r?\n|\r/);
                var csv_table_data = '<table class="table table-bordered table-striped">';
                for(var count = 0; count < csv_data.length; count++){

                    var cell_data = csv_data[count].split(",");
                    csv_table_data += '<tr>';
                    
                    for(var cell_Count=0; cell_Count < cell_data.length; cell_Count++){

                        if(cell_Count === 0){
                            csv_table_data += '<th>' + cell_data[cell_Count] + '</th>';

                        }else{
                            csv_table_data += '<td>' + cell_data[cell_Count] + '</td>';
                        }
                    }
                    csv_table_data += '</tr>';
                }

                csv_table_data += '</table>';
                $('#main_table').html(csv_table_data);
                    
            }
        });
    });
</script>


</html>